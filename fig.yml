nginx:
  image: nginx:1.7.6
  links:
    - auth
    - registry
  volumes:
    - nginx.conf:/etc/nginx/nginx.conf
  ports:
    - "8080:80"

registry:
  image: python:3.4
  command: bash -c 'pip install git+git://github.com/KeepSafe/aiohttp.git && python /registry.py'
  volumes:
    - registry.py:/registry.py
  expose:
    - "80"

auth:
  image: python:3.4
  command: bash -c 'pip install git+git://github.com/KeepSafe/aiohttp.git && python /auth.py'
  volumes:
    - auth.py:/auth.py
  expose:
    - "80"
